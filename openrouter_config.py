import os
from dotenv import load_dotenv

load_dotenv()

# OpenRouter API Configuration
OPENROUTER_API_KEY = os.getenv("OPENROUTER_API_KEY")
OPENROUTER_BASE_URL = "https://openrouter.ai/api/v1"

# Model Configuration
DEFAULT_MODEL = "openrouter/polaris-alpha"  # –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å

# System Prompt –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ü–µ–ª–µ–π
SYSTEM_PROMPT = """
–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Ü–µ–ª–µ–π –∏ –º–æ—Ç–∏–≤–∞—Ü–∏–∏. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –ø–æ–º–æ—á—å —á–µ–ª–æ–≤–µ–∫—É —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ —Ü–µ–ª—å –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ, –º–æ—Ç–∏–≤–∏—Ä—É—é—â–µ –∏ –¥–æ—Å—Ç–∏–∂–∏–º–æ.

–ü—Ä–∞–≤–∏–ª–∞:
1. –°–¥–µ–ª–∞–π —Ü–µ–ª—å –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π
2. –î–æ–±–∞–≤—å –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
3. –†–∞–∑–±–µ–π –Ω–∞ –ø–æ–¥—Ü–µ–ª–∏ –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ
4. –°–¥–µ–ª–∞–π –æ–ø–∏—Å–∞–Ω–∏–µ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–º
5. –°–æ—Ö—Ä–∞–Ω–∏ —Å—É—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Ü–µ–ª–∏, –Ω–æ —É–ª—É—á—à–∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É
6. –ë—É–¥—å –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: —Ç–æ–ª—å–∫–æ —É–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ —Ü–µ–ª–∏, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, —Ç–∞–∫ –∂–µ –Ω–µ –ø–∏—à–∏ –¥–∞—Ç –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—Ç—Ä–µ–∑–∫–æ–≤.
"""

# Prompt –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ç–æ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
PHOTO_ANALYSIS_PROMPT = """
–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –æ—Ü–µ–Ω–∫–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π —á–µ–ª–æ–≤–µ–∫–∞. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞ –∏ –æ—Ü–µ–Ω–∏ –µ–≥–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø–æ —à–∫–∞–ª–µ –æ—Ç 1 –¥–æ 100:

–û—Ü–µ–Ω–∏ —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- –°–ò–õ–ê: –û—Ü–µ–Ω–∏ —Ñ–∏–∑–∏—á–µ—Å–∫—É—é —Å–∏–ª—É, –º—ã—à–µ—á–Ω—É—é –º–∞—Å—Å—É, —Ç–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ. –£—á–∏—Ç—ã–≤–∞–π —Ä–∞–∑–º–µ—Ä –º—ã—à—Ü, –æ—Å–∞–Ω–∫—É, –æ–±—â—É—é –º–æ—â–Ω–æ—Å—Ç—å —Ç–µ–ª–∞.
- –õ–û–í–ö–û–°–¢–¨: –û—Ü–µ–Ω–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é, –≥–∏–±–∫–æ—Å—Ç—å, –ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç—å. –£—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ —Ç–µ–ª–∞, –≥–∏–±–∫–æ—Å—Ç—å, –±–∞–ª–∞–Ω—Å.
- –í–´–ù–û–°–õ–ò–í–û–°–¢–¨: –û—Ü–µ–Ω–∏ –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—å—è, —ç–Ω–µ—Ä–≥–∏—á–Ω–æ—Å—Ç—å, –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å. –£—á–∏—Ç—ã–≤–∞–π —Ü–≤–µ—Ç –∫–æ–∂–∏, –æ—Å–∞–Ω–∫—É, –æ–±—â–∏–π –≤–∏–¥.

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1. –í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û JSON –æ–±—ä–µ–∫—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ: {"strength": —á–∏—Å–ª–æ, "agility": —á–∏—Å–ª–æ, "endurance": —á–∏—Å–ª–æ}
2. –ß–∏—Å–ª–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç 1 –¥–æ 100
3. –ë—É–¥—å –æ–±—ä–µ–∫—Ç–∏–≤–µ–Ω –∏ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–µ–Ω –≤ –æ—Ü–µ–Ω–∫–∞—Ö
4. –£—á–∏—Ç—ã–≤–∞–π –≤–æ–∑—Ä–∞—Å—Ç, –ø–æ–ª, —Ç–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ
"""

# Template –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–∞–¥–∞–Ω–∏–π
TASK_GENERATION_TEMPLATE = """
–°–æ–∑–¥–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ, –≤—ã–ø–æ–ª–Ω–∏–º–æ–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞, —Ü–µ–ª—å –∫–æ—Ç–æ—Ä–æ–≥–æ: "{user_goal}"

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∑–∞–¥–∞–Ω–∏—é:
1. –ó–∞–¥–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∏ –∏–∑–º–µ—Ä–∏–º—ã–º
2. –í—ã–ø–æ–ª–Ω–∏–º—ã–º –≤ —Ç–µ—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –¥–Ω—è
3. –°–≤—è–∑–∞–Ω–Ω—ã–º —Å –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–µ–ª—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. –ú–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–º –∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º
5. –ù–µ —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω—ã–º, –Ω–æ —Ç—Ä–µ–±—É—é—â–∏–º —É—Å–∏–ª–∏–π

–ü—Ä–∏–º–µ—Ä—ã —Ö–æ—Ä–æ—à–∏—Ö –∑–∞–¥–∞–Ω–∏–π:
- "–ü—Ä–æ—á–∏—Ç–∞—Ç—å 10 —Å—Ç—Ä–∞–Ω–∏—Ü –∫–Ω–∏–≥–∏ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é"
- "–°–¥–µ–ª–∞—Ç—å 20 –º–∏–Ω—É—Ç –∫–∞—Ä–¥–∏–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏"
- "–ù–∞–ø–∏—Å–∞—Ç—å 500 —Å–ª–æ–≤ –¥–ª—è —Å—Ç–∞—Ç—å–∏"
- "–í—ã—É—á–∏—Ç—å 5 –Ω–æ–≤—ã—Ö –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å–ª–æ–≤"

–í–æ—Ç –ø—Ä–∏–º–µ—Ä/ —à–∞–±–ª–æ–Ω –∑–∞–¥–∞–Ω–∏—è, –æ–ø–∏—Ä–∞–π—Å—è –Ω–∞ –Ω–µ–≥–æ –∏ —Å–¥–µ–ª–∞–π –≤ —Ç–∞–∫–æ–º –∂–µ —Å—Ç–∏–ª–µ:
"üéØ –ó–∞–¥–∞–Ω–∏–µ –Ω–∞ –¥–µ–Ω—å ‚Äî –£—Ä–æ–≤–µ–Ω—å F üë∂
–¶–µ–ª—å: –°–∏–ª–∞ + –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞
–ù–∞–∑–≤–∞–Ω–∏–µ: ¬´–ù–∞—á–∞–ª–æ –ø—É—Ç–∏¬ª

üîπ –†–∞–∑–º–∏–Ω–∫–∞ (5‚Äì7 –º–∏–Ω)
‚Ä¢ –ü—Ä—ã–∂–∫–∏ –Ω–∞ –º–µ—Å—Ç–µ ‚Äî 2 –º–∏–Ω—É—Ç—ã
‚Ä¢ –†–∞—Å—Ç—è–∂–∫–∞ —à–µ–∏ –∏ –ø–ª–µ—á ‚Äî 1 –º–∏–Ω—É—Ç–∞
‚Ä¢ –ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è ‚Äî 2√ó20

‚∏ª

üîπ –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å
(–æ—Ç–¥—ã—Ö –º–µ–∂–¥—É –ø–æ–¥—Ö–æ–¥–∞–º–∏ 60‚Äì90 —Å–µ–∫)
 1. –û—Ç–∂–∏–º–∞–Ω–∏—è –æ—Ç –ø–æ–ª–∞:
‚Üí 4√ó–º–∞–∫—Å–∏–º—É–º (–æ—Ä–∏–µ–Ω—Ç–∏—Ä ‚Äî 10‚Äì20 —Ä–∞–∑)
 2. –ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –≤–µ—Å–æ–º:
‚Üí 3√ó20
 3. –ü–ª–∞–Ω–∫–∞:
‚Üí 3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 45 —Å–µ–∫—É–Ω–¥
 4. –ö–æ–Ω—Ç—Ä–æ–ª—å –¥—ã—Ö–∞–Ω–∏—è:
‚Üí 10 –≥–ª—É–±–æ–∫–∏—Ö –≤–¥–æ—Ö–æ–≤ –∏ –≤—ã–¥–æ—Ö–æ–≤ —Å —Ä–æ–≤–Ω–æ–π –æ—Å–∞–Ω–∫–æ–π
(–¥—ã—Ö–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–æ—Å, –≤—ã–¥–æ—Ö ‚Äî —á–µ—Ä–µ–∑ —Ä–æ—Ç)

‚∏ª

üîπ –§–∏–Ω–∏—à: –º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —á–µ–∫
–ó–∞–∫—Ä–æ–π –≥–ª–∞–∑–∞ –Ω–∞ 1 –º–∏–Ω—É—Ç—É, –≤—ã—Ä–æ–≤–Ω—è–π –¥—ã—Ö–∞–Ω–∏–µ –∏ –∑–∞–¥–∞–π —Å–µ–±–µ –≤–æ–ø—Ä–æ—Å:
‚Äú–ï—Å–ª–∏ –±—ã —è –Ω–µ –º–æ–≥ —Å–¥–∞—Ç—å—Å—è ‚Äî —á—Ç–æ –±—ã —è —Å–¥–µ–ª–∞–ª?‚Äù

‚∏ª

üèÜ –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
üí™ –°–∏–ª–∞ +2
‚è∞ –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ +1

üß† –¶–∏—Ç–∞—Ç–∞ –¥–Ω—è:

‚Äú–ü–µ—Ä–≤—ã–π –¥–µ–Ω—å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–¥–µ–∞–ª—å–Ω—ã–º ‚Äî –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–º.‚Äù

‚∏ª

üîÅ –û—Ç—á—ë—Ç:
–§–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è + –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"

–í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û —Ç–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.
"""

if not OPENROUTER_API_KEY:
    raise ValueError("OPENROUTER_API_KEY –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è")
